{"last_node_id":41,"last_link_id":53,"nodes":[{"id":11,"type":"show_text_party","pos":[1340,270],"size":{"0":410,"1":460},"flags":{},"order":7,"mode":0,"inputs":[{"name":"text","type":"STRING","link":33,"widget":{"name":"text"},"label":"text"}],"outputs":[{"name":"STRING","type":"STRING","links":[46],"shape":6,"label":"STRING","slot_index":0}],"properties":{"Node name for S&R":"show_text_party"},"widgets_values":["","This image is a digital illustration of a Yu-Gi-Oh! card (specifically a trading card game). The text on the card, “Party Pup,” is written in a stylized fantasy font and is located at the top of the card. To the right of the card name is the attribute symbol EARTH. Below the text are 4 star symbols. The middle of the card features the card image, which depicts an adorable dog with fluffy fur, wearing a vibrant party hat adorned with stars and streamers. The background is a lively party scene with colorful balloons, confetti raining down, and a small cake with candles sitting beside the pup. Below the card image is the card type “Effect Monster.”\n\nIn the middle, it says “When this card is Normal or Special Summoned, you can draw 1 card. If you control another 'Party' monster, you can give one monster on your field +500 ATK until the end of the turn. Additionally, if this card is sent to the graveyard, you can shuffle it back into your deck instead.” The numbers “ATK/1500” and “DEF/1200” are located at the bottom right corner."],"shape":1},{"id":21,"type":"LLM","pos":[910,270],"size":{"0":400,"1":470},"flags":{},"order":6,"mode":0,"inputs":[{"name":"model","type":"CUSTOM","link":35,"label":"model"},{"name":"images","type":"IMAGE","link":null,"label":"images"},{"name":"system_prompt_input","type":"STRING","link":34,"widget":{"name":"system_prompt_input"},"label":"system_prompt_input"},{"name":"user_prompt_input","type":"STRING","link":null,"widget":{"name":"user_prompt_input"},"label":"user_prompt_input"},{"name":"tools","type":"STRING","link":null,"widget":{"name":"tools"},"label":"tools"},{"name":"file_content","type":"STRING","link":null,"widget":{"name":"file_content"},"label":"file_content"}],"outputs":[{"name":"assistant_response","type":"STRING","links":[33,53],"slot_index":0,"shape":3,"label":"assistant_response"},{"name":"history","type":"STRING","links":null,"shape":3,"label":"history"},{"name":"tool","type":"STRING","links":null,"shape":3,"label":"tool"},{"name":"image","type":"IMAGE","links":null,"shape":3,"label":"image"}],"properties":{"Node name for S&R":"LLM"},"widgets_values":["","开始",0.7,"enable","enable","disable","enable",1920,"","","","","",100,"",true,true,true],"shape":1},{"id":22,"type":"Note","pos":[510,740],"size":[370,640],"flags":{},"order":0,"mode":0,"properties":{"text":""},"widgets_values":["工作流简介：\n\n该工作流是通过 ComfyUI LLM Party 插件中调用【flux提示词生成面具】节点自动生成flux提示词。目前预设的模板有五套，分别是[海报Poster]、[炉石传说HearthStone]、[游戏王Yu-Gi-Oh]、[塔罗牌tarot]和[漫画manga]。可以根据自己的爱好和使用场景选择不同的提示词生成模版。\n【flux提示词生成面具】参数详解：\n\ntheme：填写需要生成的主题内容；\nstyle：填写希望生成的风格。\nstrength：数值越大元素越多，数值区间为0～10（需要为整数/int字符）。注：漫画的strength和格子数相关，strength数值会影响格子数。\n\n\n根据测试目前闭源模型的效果和性比价最高的是 gpt-4o-mini 。如果只有开源LLM。推荐使用 gemma2 ，根据测试参数 gemma2 最能遵循提示词工程。但是总体的效果还是弱于 gpt-4o-mini 。\n\n\n\n以下是 LLM Party 配置的步骤，如果不懂的问题可以移至文末的官方交流群（注：ComfyUI LLM Party的API或者本地配置都是在ComfyUI的界面中完成，不需要在配置文件中进行配置）。\n\nStep 1：base_url：参考以下[api_key合辑]中的填写规范；api_key：不同的LLM的api_key不同，填写方式同参照[API_KEYS]\nStep 2：models_name：输入你需要调用的大模型名称，如：qwen2:latest。\n\n\n注：\n可以用ollama来管理你的模型；\n1）在api_key填入ollama，base_url填入http://127.0.0.1:11434/v1/，在model_name填入你的模型名称，例如:llama3、qwen2:latest；2）或者直接开启 is_ollama 属性，这样你就是只需要填入 model_name 就能使用ollama了。\n以ollama的方式加载的部分模型并没有工具调用功能（例如：llama3），当你连入tool后会报错，这时你可以将LLM_api节点上的 [is_tool_in_sys_prompt] 属性打开，工具信息将以系统提示词的方式输入LLM，让LLM临时获得工具调用能力。\n\n----------------------------------------------------------\n[API_KEYS合辑]\n[API_KEYS]\nbase_url = https://api.openai.com/v1/\nopenai_api_key = sk-XXXXX\n\n\n[deepseek-chat]\nbase_url=https://api.deepseek.com/v1/\napi_key=\n\n\n[glm-4]\nbase_url=https://open.bigmodel.cn/api/paas/v4/\napi_key=\n\n\n[qwen-max]\nbase_url=https://dashscope.aliyuncs.com/compatible-mode/v1/\napi_key=\n\n\n[moonshot-v1-8k]\nbase_url=https://api.moonshot.cn/v1/\napi_key=\n\n\n[general]\nbase_url=https://spark-api-open.xf-yun.com/v1/\napi_key=\n\n\n[doubao_YOUR_ENDPOINT_ID]\nbase_url=https://ark.cn-beijing.volces.com/api/v3/\napi_key=\n\n\n[your_ollama_model_name]\nbase_url=http://127.0.0.1:11434/v1/\napi_key=ollama\n\n----------------------------------------------------------\n写在最后：\n\nLLM_Party正在用心经营一片AI时代的后花园，我们希望能够在AI时代下成为众多参与者的一员，我们从开源社区中走来，也希望回到社区中去。如果我们的项目能够帮助到大家，希望大家可以在github上帮我们点一个Star，开源万岁，感谢大家支持！！！\n欢迎大家来到我们用心经营的后花园：\ngithub：https://github.com/heshengtao/comfyui_LLM_party\nB站链接：https://b23.tv/FHgxiB\nQQ交流群：931057213\n微信交流群：Choo-Yong（添加小助理微信，统一通过后会添加至交流群）"],"color":"#432","bgcolor":"#653","shape":1},{"id":24,"type":"flux_persona","pos":[510,500],"size":[370,150],"flags":{},"order":1,"mode":0,"outputs":[{"name":"system_prompt","type":"STRING","links":[34],"shape":3,"label":"system_prompt","slot_index":0}],"properties":{"Node name for S&R":"flux_persona"},"widgets_values":[true,"游戏王Yu-Gi-Oh","派对狗狗","奇幻",5],"shape":1},{"id":25,"type":"LLM_api_loader","pos":[510,280],"size":[370,130],"flags":{},"order":2,"mode":0,"outputs":[{"name":"model","type":"CUSTOM","links":[35,51],"shape":3,"label":"model","slot_index":0}],"properties":{"Node name for S&R":"LLM_api_loader"},"widgets_values":["gpt-4o-mini","","",false],"shape":1},{"id":28,"type":"PreviewImage","pos":[2220,280],"size":[850,1100],"flags":{},"order":13,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":49,"label":"图像"}],"properties":{"Node name for S&R":"PreviewImage"},"shape":1},{"id":31,"type":"FluxSamplerParams+","pos":[1790,790],"size":[400,270],"flags":{},"order":11,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":41,"label":"model"},{"name":"conditioning","type":"CONDITIONING","link":45,"label":"conditioning"},{"name":"latent_image","type":"LATENT","link":47,"label":"latent_image"}],"outputs":[{"name":"latent","type":"LATENT","links":[48],"shape":3,"label":"latent","slot_index":0},{"name":"params","type":"SAMPLER_PARAMS","links":null,"shape":3,"label":"params"}],"properties":{"Node name for S&R":"FluxSamplerParams+"},"widgets_values":["?","euler","simple","20","3.5","","","1.0"],"shape":1},{"id":33,"type":"CheckpointLoaderNF4","pos":[1790,270],"size":[400,100],"flags":{},"order":3,"mode":0,"outputs":[{"name":"MODEL","type":"MODEL","links":[41],"shape":3,"label":"MODEL","slot_index":0},{"name":"CLIP","type":"CLIP","links":null,"shape":3,"label":"CLIP","slot_index":1},{"name":"VAE","type":"VAE","links":[50],"shape":3,"label":"VAE"}],"properties":{"Node name for S&R":"CheckpointLoaderNF4"},"widgets_values":["12-FLUX模型/flux1-dev-bnb-nf4-v2.safetensors"],"shape":1},{"id":34,"type":"DualCLIPLoader","pos":[1790,470],"size":[400,110],"flags":{},"order":4,"mode":0,"outputs":[{"name":"CLIP","type":"CLIP","links":[44],"shape":3,"label":"CLIP","slot_index":0}],"properties":{"Node name for S&R":"DualCLIPLoader"},"widgets_values":["FLUX_clipvision_models/t5xxl_fp16.safetensors","FLUX_clipvision_models/clip_l.safetensors","flux"],"shape":1},{"id":37,"type":"CLIPTextEncode_party","pos":[1790,640],"size":[400,50],"flags":{},"order":9,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":44,"label":"clip"},{"name":"text","type":"STRING","link":46,"widget":{"name":"text"}}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[45],"shape":3,"label":"CONDITIONING","slot_index":0}],"properties":{"Node name for S&R":"CLIPTextEncode_party"},"widgets_values":[""],"shape":1},{"id":38,"type":"SDXLEmptyLatentSizePicker+","pos":[1790,1110],"size":[400,170],"flags":{},"order":5,"mode":0,"outputs":[{"name":"LATENT","type":"LATENT","links":[47],"shape":3,"label":"Latent"},{"name":"width","type":"INT","links":null,"shape":3,"label":"宽度"},{"name":"height","type":"INT","links":null,"shape":3,"label":"高度"}],"properties":{"Node name for S&R":"SDXLEmptyLatentSizePicker+"},"widgets_values":["896x1152 (0.78)",4,0,0],"shape":1},{"id":39,"type":"VAEDecode","pos":[1800,1330],"size":[390,60],"flags":{},"order":12,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":48,"label":"Latent"},{"name":"vae","type":"VAE","link":50,"label":"VAE"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[49],"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"VAEDecode"},"shape":1},{"id":40,"type":"show_text_party","pos":[1340,840],"size":[420,540],"flags":{},"order":10,"mode":0,"inputs":[{"name":"text","type":"STRING","link":52,"widget":{"name":"text"},"label":"text"}],"outputs":[{"name":"STRING","type":"STRING","links":[],"shape":6,"label":"STRING","slot_index":0}],"properties":{"Node name for S&R":"show_text_party"},"widgets_values":["","这张图片是一个《游戏王》卡片（具体而言是交易卡游戏）的数字插图。卡片上的文字“派对小狗”以一种风格化的幻想字体书写，位于卡片的顶部。在卡片名称的右侧是属性符号“地”。文字下方有4个星星符号。卡片中间是卡片的图像，描绘了一只可爱的狗狗，毛茸茸的，戴着一个装饰有星星和彩带的鲜艳派对帽。背景是一个热闹的派对场景，有五颜六色的气球、飘落的五彩纸屑，以及一旁放着小蛋糕和蜡烛的小狗。卡片图像下方是卡片类型“效果怪兽”。\n\n中间写着：“当这张卡被普通召唤或特殊召唤时，你可以抽1张卡。如果你控制另外一只‘派对’怪兽，你可以让你场上的一只怪兽在回合结束前获得+500攻击力。此外，如果这张卡被送入墓地，你可以将其洗回你的牌组。”数字“攻击力/1500”和“防御力/1200”位于右下角。"],"shape":1},{"id":41,"type":"LLM","pos":[910,840],"size":[400,550],"flags":{},"order":8,"mode":0,"inputs":[{"name":"model","type":"CUSTOM","link":51,"label":"model"},{"name":"images","type":"IMAGE","link":null,"label":"images"},{"name":"system_prompt_input","type":"STRING","link":null,"widget":{"name":"system_prompt_input"},"label":"system_prompt_input"},{"name":"user_prompt_input","type":"STRING","link":null,"widget":{"name":"user_prompt_input"},"label":"user_prompt_input"},{"name":"tools","type":"STRING","link":null,"widget":{"name":"tools"},"label":"tools"},{"name":"file_content","type":"STRING","link":null,"widget":{"name":"file_content"},"label":"file_content"},{"name":"file_content","type":"STRING","link":null,"widget":{"name":"file_content"}},{"name":"user_prompt","type":"STRING","link":53,"widget":{"name":"user_prompt"}}],"outputs":[{"name":"assistant_response","type":"STRING","links":[52],"slot_index":0,"shape":3,"label":"assistant_response"},{"name":"history","type":"STRING","links":null,"shape":3,"label":"history"},{"name":"tool","type":"STRING","links":null,"shape":3,"label":"tool"},{"name":"image","type":"IMAGE","links":null,"shape":3,"label":"image"}],"properties":{"Node name for S&R":"LLM"},"widgets_values":["你是一个翻译专家，你需要将输入的内容翻译为中文，不需要添加其他任何内容。","",0.7,"enable","enable","disable","enable",1920,"","","","","",100,"",true,true,true,true,true,true,true],"shape":1}],"links":[[33,21,0,11,0,"STRING"],[34,24,0,21,2,"STRING"],[35,25,0,21,0,"CUSTOM"],[41,33,0,31,0,"MODEL"],[44,34,0,37,0,"CLIP"],[45,37,0,31,1,"CONDITIONING"],[46,11,0,37,1,"STRING"],[47,38,0,31,2,"LATENT"],[48,31,0,39,0,"LATENT"],[49,39,0,28,0,"IMAGE"],[50,33,2,39,1,"VAE"],[51,25,0,41,0,"CUSTOM"],[52,41,0,40,0,"STRING"],[53,21,0,41,7,"STRING"]],"groups":[{"title":"LLM API Config","bounding":[500,200,390,210],"color":"#3f789e","font_size":24,"locked":false},{"title":"LLM Apply","bounding":[900,200,420,554],"color":"#3f789e","font_size":24,"locked":false},{"title":"OutPut","bounding":[1330,200,437,554],"color":"#3f789e","font_size":24,"locked":false},{"title":"LLM Party for FLUX提示词五合一（炉石&游戏王&塔罗牌&海报&漫画）一键生成","bounding":[500,100,2590,90],"color":"#3f789e","font_size":72,"locked":false},{"title":"Flux Prompt","bounding":[500,420,390,234],"color":"#3f789e","font_size":24,"locked":false},{"title":"Note","bounding":[500,660,390,740],"color":"#3f789e","font_size":24,"locked":false},{"title":"Translate","bounding":[900,770,420,634],"color":"#3f789e","font_size":24,"locked":false},{"title":"Translate OutPut","bounding":[1330,770,440,630],"color":"#3f789e","font_size":24,"locked":false},{"title":"FLUX Model","bounding":[1780,200,420,184],"color":"#3f789e","font_size":24,"locked":false},{"title":"Flux Clip ","bounding":[1780,396,420,304],"color":"#3f789e","font_size":24,"locked":false},{"title":"FLUX Sampling","bounding":[1780,720,420,680],"color":"#3f789e","font_size":24,"locked":false},{"title":"Image OutPut","bounding":[2210,200,880,1200],"color":"#3f789e","font_size":24,"locked":false}],"config":{},"extra":{"ds":{"scale":0.5445000000000045,"offset":[-65.20975102701455,9.883759255592183]}},"version":0.4}
